{% extends ":Default:base.html.twig" %}

{% block head %}
  {% stylesheets 'css/custom/login.less' filter='cssrewrite,lessphp' output='compiled/login.css' %}
  <link rel="stylesheet" href="{{ asset_url }}" />
  {% endstylesheets %}

  {% javascripts 'js/plugins/*'
        'js/base/*'
        'js/social/*' output='compiled/script.js' %}
        <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
        <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
        <script type="text/javascript" src="{{ asset_url }}"></script>
  {% endjavascripts %}
{% endblock %}

{% block header %}
    {% include ':Default:headerLogo.html.twig' %}
{% endblock header%}

{% block body %}

{% block fos_user_content %}

<form id ="form_fos" action="{{ path("fos_user_security_check") }}" method="post">
    <input type="hidden" id = "csrf_token" name="_csrf_token" value="{{ csrf_token }}" />

    <h1>{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}</h1>
    <p></p>

    {#<label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>#}
    <div class="input-field">
      <input type="text" id="username" name="_username" value="{{ last_username }}" placeholder="{{ "username"|trans({}, "catroweb") }}" />
      <div class="img-login"></div>
    </div>

    <div class="input-field">
      <input type="password" id="password" name="_password" placeholder="{{ "password"|trans({}, "catroweb") }}" />
      <div class="img-password"></div>
    </div>

    {#<input type="checkbox" id="remember_me" name="_remember_me" value="on" />#}

    {#<input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />#}

    <input type="hidden" name="_target_path" value="{{ app.request.headers.get('referer') }}" />
    <button id="_submit" class="login" name="_submit" >{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}</button>

    <div id="login_links">
        <span id="login_link_left">
            <a href="register">Create an account</a>
        </span>
        <span id="login_link_right">
            <a href="{{ path("sonata_user_resetting_request") }}" id="pw-request">{{ "login.forgotPass"|trans({}, "catroweb") }}</a>
        </span>
    </div>

    <!-- <div class="link left">
        <a id="btn-reset-password" href="{ url('fos_user_resetting_reset', { 'flavor': app.request.attributes.get('flavor') }) }}">Forgot your password?</a>
        <a id="btn-reset-password" href="{ url('fos_user_registration_register', { 'flavor': app.request.attributes.get('flavor') }) }}">Create an account</a>
    </div> -->

    {% if error %}
      <div class="error-text">{{ "login.passOrUser"|trans({}, "catroweb") }}</div>
    {% endif %}
</form>

<form id ="form_oauth" action="{{ path("fos_user_security_check") }}" method="post">

    <input type="hidden" id = "csrf_token_oauth" name="_csrf_token" value="{{ csrf_token }}" />
    <input type="hidden" id = "username_oauth" name="_username" />
    <input type="hidden" id = "password_oauth" name="_password" />
    <input type="hidden" id = "gplus_approval_prompt" value="auto" />
    <input type="hidden" id = "facebook_auth_type" value=""/> <!-- can be set to reauthenticate to force re-authentication of the user -->

    <div id="separator">
        <br>
        <hr/>
        <span id="or">
            OR
        </span>
        <hr/>
        <br>
        <p></p>
    </div>

    <div id="fb-root"></div>
    <div id ="googleLoginButton">
            <!--
                Google Login Button is a 2 click button, where image is removed at first click, second click triggers login because of data privacy - see:
                http://extensions.joomla.org/extensions/extension/social-web/social-share/2-click-social-buttons
            -->
    <a id="btn-login_google" href="#" onclick="triggerGoogleLogin();"><img class="img-socialLogin" src="{{ asset('images/social/sign-in-with-google.png') }}" alt="Google Login"></a>
    </div>
    <div id ="facebookLoginButton">
    <a id="btn-login_facebook" href="#" onclick="triggerFacebookLogin();"><img class="img-socialLogin" src="{{ asset('images/social/sign-in-with-facebook.png') }}" alt="Facebook Login"></a>
    </div>

     <div id="status">
    </div>

    <button id="_submit_oauth" name="_submit" class="hidden" />

</form>
{% endblock fos_user_content %}

{% endblock body %}